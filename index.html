<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Crystal Docs 1.14.0">
<meta name="crystal_docs.project_version" content="main">
<meta name="crystal_docs.project_name" content="uing">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="uing">
  <title>uing main</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill="currentColor" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<input type="checkbox" id="sidebar-btn">
<label for="sidebar-btn" id="sidebar-btn-label">
  <svg class="open" xmlns="http://www.w3.org/2000/svg" height="2em" width="2em" viewBox="0 0 512 512"><title>Open Sidebar</title><path fill="currentColor" d="M80 96v64h352V96H80zm0 112v64h352v-64H80zm0 112v64h352v-64H80z"></path></svg>
  <svg class="close" xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 512 512"><title>Close Sidebar</title><path fill="currentColor" d="m118.6 73.4-45.2 45.2L210.7 256 73.4 393.4l45.2 45.2L256 301.3l137.4 137.3 45.2-45.2L301.3 256l137.3-137.4-45.2-45.2L256 210.7Z"></path></svg>
</label>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          uing
        </a>
      </h1>

      <span class="project-version">
        main
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="uing/UIng" data-name="uing">
      <a href="UIng.html">UIng</a>
      
        <ul>
  
  <li class=" " data-id="uing/UIng/Align" data-name="uing::align">
      <a href="UIng/Align.html">Align</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Area" data-name="uing::area">
      <a href="UIng/Area.html">Area</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/AreaDrawParams" data-name="uing::areadrawparams">
      <a href="UIng/AreaDrawParams.html">AreaDrawParams</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/AreaHandler" data-name="uing::areahandler">
      <a href="UIng/AreaHandler.html">AreaHandler</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/AreaKeyEvent" data-name="uing::areakeyevent">
      <a href="UIng/AreaKeyEvent.html">AreaKeyEvent</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/AreaMouseEvent" data-name="uing::areamouseevent">
      <a href="UIng/AreaMouseEvent.html">AreaMouseEvent</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/At" data-name="uing::at">
      <a href="UIng/At.html">At</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Attribute" data-name="uing::attribute">
      <a href="UIng/Attribute.html">Attribute</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/AttributedString" data-name="uing::attributedstring">
      <a href="UIng/AttributedString.html">AttributedString</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/AttributeType" data-name="uing::attributetype">
      <a href="UIng/AttributeType.html">AttributeType</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Box" data-name="uing::box">
      <a href="UIng/Box.html">Box</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Button" data-name="uing::button">
      <a href="UIng/Button.html">Button</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Checkbox" data-name="uing::checkbox">
      <a href="UIng/Checkbox.html">Checkbox</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/ColorButton" data-name="uing::colorbutton">
      <a href="UIng/ColorButton.html">ColorButton</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Combobox" data-name="uing::combobox">
      <a href="UIng/Combobox.html">Combobox</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Control" data-name="uing::control">
      <a href="UIng/Control.html">Control</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DateTimePicker" data-name="uing::datetimepicker">
      <a href="UIng/DateTimePicker.html">DateTimePicker</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawBrush" data-name="uing::drawbrush">
      <a href="UIng/DrawBrush.html">DrawBrush</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawBrushGradientStop" data-name="uing::drawbrushgradientstop">
      <a href="UIng/DrawBrushGradientStop.html">DrawBrushGradientStop</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawBrushType" data-name="uing::drawbrushtype">
      <a href="UIng/DrawBrushType.html">DrawBrushType</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawContext" data-name="uing::drawcontext">
      <a href="UIng/DrawContext.html">DrawContext</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawFillMode" data-name="uing::drawfillmode">
      <a href="UIng/DrawFillMode.html">DrawFillMode</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawLineCap" data-name="uing::drawlinecap">
      <a href="UIng/DrawLineCap.html">DrawLineCap</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawLineJoin" data-name="uing::drawlinejoin">
      <a href="UIng/DrawLineJoin.html">DrawLineJoin</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawMatrix" data-name="uing::drawmatrix">
      <a href="UIng/DrawMatrix.html">DrawMatrix</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawPath" data-name="uing::drawpath">
      <a href="UIng/DrawPath.html">DrawPath</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawStrokeParams" data-name="uing::drawstrokeparams">
      <a href="UIng/DrawStrokeParams.html">DrawStrokeParams</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawTextAlign" data-name="uing::drawtextalign">
      <a href="UIng/DrawTextAlign.html">DrawTextAlign</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawTextLayout" data-name="uing::drawtextlayout">
      <a href="UIng/DrawTextLayout.html">DrawTextLayout</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/DrawTextLayoutParams" data-name="uing::drawtextlayoutparams">
      <a href="UIng/DrawTextLayoutParams.html">DrawTextLayoutParams</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/EditableCombobox" data-name="uing::editablecombobox">
      <a href="UIng/EditableCombobox.html">EditableCombobox</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Entry" data-name="uing::entry">
      <a href="UIng/Entry.html">Entry</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/ExtKey" data-name="uing::extkey">
      <a href="UIng/ExtKey.html">ExtKey</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/FontButton" data-name="uing::fontbutton">
      <a href="UIng/FontButton.html">FontButton</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/FontDescriptor" data-name="uing::fontdescriptor">
      <a href="UIng/FontDescriptor.html">FontDescriptor</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Form" data-name="uing::form">
      <a href="UIng/Form.html">Form</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Grid" data-name="uing::grid">
      <a href="UIng/Grid.html">Grid</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Group" data-name="uing::group">
      <a href="UIng/Group.html">Group</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Image" data-name="uing::image">
      <a href="UIng/Image.html">Image</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Label" data-name="uing::label">
      <a href="UIng/Label.html">Label</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Menu" data-name="uing::menu">
      <a href="UIng/Menu.html">Menu</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/MenuItem" data-name="uing::menuitem">
      <a href="UIng/MenuItem.html">MenuItem</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/MethodMissing" data-name="uing::methodmissing">
      <a href="UIng/MethodMissing.html">MethodMissing</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Modifiers" data-name="uing::modifiers">
      <a href="UIng/Modifiers.html">Modifiers</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/MultilineEntry" data-name="uing::multilineentry">
      <a href="UIng/MultilineEntry.html">MultilineEntry</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/OpenTypeFeatures" data-name="uing::opentypefeatures">
      <a href="UIng/OpenTypeFeatures.html">OpenTypeFeatures</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/ProgressBar" data-name="uing::progressbar">
      <a href="UIng/ProgressBar.html">ProgressBar</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/RadioButtons" data-name="uing::radiobuttons">
      <a href="UIng/RadioButtons.html">RadioButtons</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Separator" data-name="uing::separator">
      <a href="UIng/Separator.html">Separator</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Slider" data-name="uing::slider">
      <a href="UIng/Slider.html">Slider</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/SortIndicator" data-name="uing::sortindicator">
      <a href="UIng/SortIndicator.html">SortIndicator</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Spinbox" data-name="uing::spinbox">
      <a href="UIng/Spinbox.html">Spinbox</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Tab" data-name="uing::tab">
      <a href="UIng/Tab.html">Tab</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Table" data-name="uing::table">
      <a href="UIng/Table.html">Table</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TableModel" data-name="uing::tablemodel">
      <a href="UIng/TableModel.html">TableModel</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TableModelHandler" data-name="uing::tablemodelhandler">
      <a href="UIng/TableModelHandler.html">TableModelHandler</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TableParams" data-name="uing::tableparams">
      <a href="UIng/TableParams.html">TableParams</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TableSelection" data-name="uing::tableselection">
      <a href="UIng/TableSelection.html">TableSelection</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TableSelectionMode" data-name="uing::tableselectionmode">
      <a href="UIng/TableSelectionMode.html">TableSelectionMode</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TableTextColumnOptionalParams" data-name="uing::tabletextcolumnoptionalparams">
      <a href="UIng/TableTextColumnOptionalParams.html">TableTextColumnOptionalParams</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TableValue" data-name="uing::tablevalue">
      <a href="UIng/TableValue.html">TableValue</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TableValueType" data-name="uing::tablevaluetype">
      <a href="UIng/TableValueType.html">TableValueType</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TextItalic" data-name="uing::textitalic">
      <a href="UIng/TextItalic.html">TextItalic</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TextStretch" data-name="uing::textstretch">
      <a href="UIng/TextStretch.html">TextStretch</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TextWeight" data-name="uing::textweight">
      <a href="UIng/TextWeight.html">TextWeight</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/TM" data-name="uing::tm">
      <a href="UIng/TM.html">TM</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Underline" data-name="uing::underline">
      <a href="UIng/Underline.html">Underline</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/UnderlineColor" data-name="uing::underlinecolor">
      <a href="UIng/UnderlineColor.html">UnderlineColor</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/Window" data-name="uing::window">
      <a href="UIng/Window.html">Window</a>
      
    </li>
  
  <li class=" " data-id="uing/UIng/WindowResizeEdge" data-name="uing::windowresizeedge">
      <a href="UIng/WindowResizeEdge.html">WindowResizeEdge</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="u-ing" class="anchor" href="#u-ing">  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>UIng</h1>
<p><a href="https://github.com/kojix2/uing/actions/workflows/ci.yml"><img src="https://github.com/kojix2/uing/actions/workflows/ci.yml/badge.svg" alt="test" /></a></p>
<p><strong>UIng</strong> is yet another Crystal binding for <strong><a href="https://github.com/libui-ng/libui-ng">libui-ng</a></strong> or <strong><a href="https://github.com/petabyt/libui-dev">libui-dev</a></strong>.</p>
<p>| Windows                                                                                                          | Mac                                                                                                              | Linux                                                                                                            |
| ---------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| <img src="https://user-images.githubusercontent.com/5798442/103118046-900ea780-46b0-11eb-81fc-32626762e4df.png"> | <img src="https://user-images.githubusercontent.com/5798442/103118059-99980f80-46b0-11eb-9d12-324ec4d297c9.png"> | <img src="https://user-images.githubusercontent.com/5798442/103118068-a0bf1d80-46b0-11eb-8c5c-3bdcc3dcfb26.png"> |</p>
<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>🔶 Installation</h2>
<h3><a id="downloading-binaries" class="anchor" href="#downloading-binaries">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>⇩ Downloading Binaries</h3>
<pre><code class="language-sh">crystal run download.cr</code></pre>
<p>The libui project <strong>does not distribute pre-compiled binaries</strong>.<br />
Therefore, this project uses the following sources to obtain binaries:</p>
<p>| OS                | Binary Source                                                                                       |
| ----------------- | --------------------------------------------------------------------------------------------------- |
| <strong>MacOS / Linux</strong> | Builds from the <a href="https://github.com/kojix2/libui-ng">kojix2/libui-ng</a> repository (pre-build branch) |
| <strong>Windows</strong>       | Pre-built binaries distributed with <a href="https://github.com/petabyt/libui-dev/releases">libui-dev</a>      |</p>
<h3><a id="windows" class="anchor" href="#windows">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Windows</h3>
<ul>
<li><strong>MinGW (mingw-w64-crystal)</strong> UCRT / Clang is not supported because libui-dev is built with MinGW64.</li>
<li><strong>MSVC (x86_64-msvc)</strong> Make sure Windows SDK command-line tools is in the PATH.</li>
</ul>
<pre><code class="language-powsershell"># Add the path to the Windows Kits
$env:Path += &quot;;C:\Program Files (x86)\Windows Kits\10\bin\10.0.22621.0\x64&quot;</code></pre>
<p>See: https://crystal-lang.org/install/#windows</p>
<p>The default link flag is defined in <a href="src/uing/lib_ui/lib_ui.cr">lib_ui.cr</a>.</p>
<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>🔶 Usage</h2>
<p>The Control gallery example uses a high-level API.</p>
<pre><code class="language-sh">crystal build examples/control_gallery.cr
./control_gallery</code></pre>
<h3><a id="basic-example" class="anchor" href="#basic-example">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Basic Example</h3>
<p>High level API:</p>
<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;../src/uing&quot;</span>

<span class="t">UIng</span>.init

window <span class="o">=</span> <span class="t">UIng</span><span class="t">::</span><span class="t">Window</span>.new(<span class="s">&quot;hello world&quot;</span>, <span class="n">300</span>, <span class="n">200</span>, <span class="n">1</span>)
window.on_closing <span class="k">do</span>
  <span class="t">UIng</span>.quit
  <span class="n">1</span>
<span class="k">end</span>

button <span class="o">=</span> <span class="t">UIng</span><span class="t">::</span><span class="t">Button</span>.new(<span class="s">&quot;Button&quot;</span>)
button.on_clicked <span class="k">do</span>
  <span class="t">UIng</span>.msg_box(window, <span class="s">&quot;Information&quot;</span>, <span class="s">&quot;You clicked the button&quot;</span>)
  <span class="n">0</span>
<span class="k">end</span>

window.set_child(button)
window.show

<span class="t">UIng</span>.main
<span class="t">UIng</span>.uninit</code></pre>
<p>Middle level API:</p>
<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;../src/uing&quot;</span>

<span class="t">UIng</span>.init

window <span class="o">=</span> <span class="t">UIng</span>.new_window(<span class="s">&quot;hello world&quot;</span>, <span class="n">300</span>, <span class="n">200</span>, <span class="n">1</span>)
<span class="t">UIng</span>.window_on_closing(window) <span class="k">do</span>
  <span class="t">UIng</span>.quit
  <span class="n">1</span>
<span class="k">end</span>

button <span class="o">=</span> <span class="t">UIng</span>.new_button(<span class="s">&quot;Button&quot;</span>)
<span class="t">UIng</span>.button_on_clicked(button) <span class="k">do</span>
  <span class="t">UIng</span>.msg_box(window, <span class="s">&quot;Information&quot;</span>, <span class="s">&quot;You clicked the button&quot;</span>)
  <span class="n">0</span>
<span class="k">end</span>

<span class="t">UIng</span>.window_set_child(window, button)
<span class="t">UIng</span>.control_show(window)

<span class="t">UIng</span>.main
<span class="t">UIng</span>.uninit</code></pre>
<p>For more details, see <a href="examples">examples</a>.</p>
<p>The middle-level API is reasonably well-implemented, allowing users to access most of libui's functionality. Please start by using this level.</p>
<h3><a id="binding-levels" class="anchor" href="#binding-levels">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Binding Levels</h3>
<p>| <strong>Level</strong>        | <strong>Defined in</strong>              | <strong>Example</strong>                    | <strong>Description</strong>               |
| ---------------- | --------------------------- | ------------------------------ | ----------------------------- |
| <strong>Low-Level</strong>    | <code>src/uing/lib_ui/lib_ui.cr</code> | <code>UIng::LibUI.new_button</code>, etc. | Direct bindings to the libui. |
| <strong>Middle-Level</strong> | <code>src/uing.cr</code>               | <code>UIng.button_text</code>, etc.       | Handles memory management.    |
| <strong>High-Level</strong>   | <code>src/uing/*.cr</code>             | <code>button.on_clicked { }</code>, etc.  | Custom API or macros.         |</p>
<ul>
<li>At the middle level, memory management tasks such as string deallocation are handled.</li>
<li>The high-level API implementation is limited; the <code>Control</code> module provides a <code>method_missing</code> macro to handle undefined methods.
<ul>
<li>Methods generated by the MethodMissing macro currently have two limitations in interpreting blocks. (1) Blocks with arguments are not available. (2) The return type is inferred from the code. Therefore, you may need to return Nil if the return value should be void. If you are not sure, you should call the Middle Level API.</li>
</ul>
</li>
</ul>
<h3><a id="hide-console-window-on-windows" class="anchor" href="#hide-console-window-on-windows">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Hide Console Window on Windows</h3>
<h4><a id="min-gw" class="anchor" href="#min-gw">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>MinGW</h4>
<pre><code class="language-sh">crystal build examples/basic_window.cr --link-flags &quot;-mwindows&quot;</code></pre>
<h4><a id="msvc" class="anchor" href="#msvc">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>MSVC</h4>
<pre><code class="language-sh">crystal build examples/basic_window.cr --link-flags=/SUBSYSTEM:WINDOWS</code></pre>
<p><strong>Note:</strong> The program will crash if you attempt to output to the console.</p>
<h3><a id="static-linking" class="anchor" href="#static-linking">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Static Linking</h3>
<p>At present, I have not been able to generate an executable that functions correctly through static linking on any platform.
Your contributions are welcome.</p>
<h2><a id="closures-and-their-limitations" class="anchor" href="#closures-and-their-limitations">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>🔶 Closures and Their Limitations</h2>
<p>Crystal has two types of blocks. One is the block that is inlined at compile time and is mainly used with yield. The other is the captured block. Blocks passed as callbacks to C functions are always captured blocks. However, closures do not work correctly with low-level bindings. When referencing variables outside the block, the program detects the anomaly and terminates immediately (note that this does not throw an exception, and it is different from a segmentation fault). To work around this issue, the mid-level API implements closures using the Box class.</p>
<p>On the other hand, the real problem arises when storing callback functions in the fields of a structure and then passing them to C. In this case, since there is no user data, the closures may not function as expected. There is still no definitive solution for this.</p>
<h2><a id="development" class="anchor" href="#development">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>🔶 Development</h2>
<h3><a id="additional-rules" class="anchor" href="#additional-rules">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Additional Rules</h3>
<ul>
<li><code>UIng::LibUI</code> is a <strong>module dedicated to bindings</strong>.</li>
<li><strong>Use</strong> <a href="https://github.com/crystal-lang/crystal_lib">crystal_lib</a> <strong>to generate low-level bindings</strong> (manual modifications required).</li>
<li><strong>Passing a Proc to a C function</strong>: <a href="https://crystal-lang.org/api/1.12.1/Proc.html#passing-a-proc-to-a-c-function">Official Documentation</a>.</li>
</ul>
<h2><a id="windows-compatibility" class="anchor" href="#windows-compatibility">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>🔶 Windows Compatibility</h2>
<h3><a id="com-ctl32-version-issues" class="anchor" href="#com-ctl32-version-issues">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>ComCtl32 Version Issues</h3>
<ul>
<li><code>libui-ng</code>'s <code>msg_box</code> implementation relies on <code>TaskDialog</code>.</li>
<li><code>TaskDialog</code> requires <strong>ComCtl32.dll version 6</strong>.</li>
<li>There are other dependencies on version 6 besides <code>TaskDialog</code>.</li>
<li>The standard ComCtl32 is version 5, so a manifest file is necessary.</li>
<li>For <code>MSVC</code> the link flag specifies the manuf.</li>
<li>For <code>MinGW</code>, <code>comctl32.res</code> is generated when <code>download.cr</code> is run.</li>
</ul>
<h3><a id="debugging" class="anchor" href="#debugging">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Debugging</h3>
<p>Many unix tools are available on Windows (MinGW).</p>
<ul>
<li><code>gdb</code> can be used for debugging.</li>
<li><code>ldd</code> can be used to check dependencies.</li>
<li><code>strace</code> can be used to trace system calls.</li>
<li><code>objdump</code> can be used to disassemble.</li>
</ul>
<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>🔶 Contributing</h2>
<p>You can contribute to this project by:</p>
<ul>
<li>☑ Forking this repository</li>
<li>☑ Reporting bugs</li>
<li>☑ Fixing bugs and submitting pull requests</li>
<li>☑ Improving documentation</li>
<li>☑ Suggesting or adding new features</li>
</ul>
<h2><a id="license" class="anchor" href="#license">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>🔶 License</h2>
<p>This project is licensed under the <strong>MIT License</strong>.</p>
</div>
</body>
</html>
